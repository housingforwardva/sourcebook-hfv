[
  {
    "objectID": "population.html#total-population",
    "href": "population.html#total-population",
    "title": "1  Population",
    "section": "1.1 Total Population",
    "text": "1.1 Total Population\nThis dashboard shows annual population counts and percent changes from 2010 to 2022. Data for 2010 and 2020 are from those years’ Decennial Census counts; all other years use estimates from the Census Bureau’s Population Estimates Program (PEP).\n#| standalone: true\n#| echo: false\n\n# This is a Shiny app that shows the total population\n# of Virginia geographies from 2010 to 2022 based on \n# Census Population Estimates Program and the Decennial\n# Census.\n\n# Load necessary libraries.\n\nlibrary(shiny)\nlibrary(tidyverse)\nlibrary(ggplot2)\nlibrary(ggiraph)\nlibrary(ggtext)\nlibrary(glue)\nlibrary(hdatools)\nlibrary(scales)\nlibrary(rsconnect)\nlibrary(bslib)\n\n# Load in data that has already been cleaned in R script.\ntotal_pop <- readRDS(\"data/total_pop.rds\")\n\n# Create a list of all unique CBSAs and localities in Virginia based on the data.\ncbsa_list <- sort(unique(total_pop$cbsa_title))\nlocality_list <- sort(unique(total_pop$name_long))\n\n# Aggregate data to the CBSA-level for faster processing.\ncbsa_pop <- total_pop |> \n  group_by(year, cbsa_title, counttype) |> \n  summarise(value = sum(value))\n\n# Aggregate data to the state-lvel for faster processing.\nstate_pop <- total_pop |> \n  group_by(year, counttype) |> \n  summarise(value = sum(value))\n\n# The server in a Shiny app is the \"back-end.\" It is all the work that is being\n# done behind the scenes to create the reactive visualization. This is done \n# based on input from a user that then leads to an output.\n\nserver <- function(input, output) {\n  \n  options(shiny.autoreload = TRUE)\n  \n  locality <- reactive({\n    filter(total_pop, name_long == input$sel_locality)\n  })\n  \n  cbsa <- reactive({\n    filter(cbsa_pop, cbsa_title == input$sel_cbsa)\n  })\n  \n  output$local_plot <- renderGirafe({\n    \n    gg <- ggplot(locality(),\n                 aes(x = year,\n                     y = value,\n                     fill = counttype,\n                     data_id = value,\n                     tooltip = number_format(big.mark = \",\")(value))) +\n      geom_col(position = \"dodge\") +\n      geom_col_interactive(position = \"dodge\") +\n      # theme_hfv(base_size = 15) +\n      # scale_fill_hfv() +\n      labs(title = \"Local population\",\n           subtitle = input$sel_locality,\n           caption = \"**Source:** U.S. Census Bureau, Population Estimates Program and Decennial Census.\") +\n      scale_y_continuous(labels = number_format(big.mark = \",\"))\n    \n    \n    girafe(ggobj = gg, \n           width_svg = 7, \n           height_svg = 4,\n    options = list(\n      opts_tooltip(css = \"background-color:white;color:black;font-family:Verdana;padding:5pt;\"),\n      opts_sizing(rescale = FALSE),\n      opts_toolbar(pngname = input$sel_locality)))\n})\n  \n  output$cbsa_plot <- renderGirafe({\n    \n    gg <- ggplot(cbsa(),\n                 aes(x = year,\n                     y = value,\n                     fill = counttype,\n                     data_id = value,\n                     tooltip = number_format(big.mark = \",\")(value))) +\n      geom_col(position = \"dodge\") +\n      geom_col_interactive(position = \"dodge\") +\n      # theme_hfv(base_size = 15) +\n      # scale_fill_hfv() +\n      labs(title = \"Core-based statistical area population\",\n           subtitle = input$sel_cbsa,\n           caption = \"**Source:** U.S. Census Bureau, Population Estimates Program and Decennial Census.\") +\n    scale_y_continuous(labels = number_format(big.mark = \",\"))\n    \n    girafe(ggobj = gg, \n           width_svg = 7, \n           height_svg = 4,\n           options = list(\n             opts_tooltip(css = \"background-color:white;color:black;font-family:Verdana;padding:5pt;\"),\n             opts_sizing(rescale = FALSE),\n             opts_toolbar(pngname = input$sel_cbsa)))\n  })\n  \n  output$state_plot <- renderGirafe({\n    \n    gg <- ggplot(state_pop,\n                 aes(x = year,\n                     y = value,\n                     fill = counttype,\n                     data_id = value,\n                     tooltip = number_format(big.mark = \",\")(value))) +\n      geom_col(position = \"dodge\") +\n      geom_col_interactive(position = \"dodge\") +\n      # theme_hfv(base_size = 15) +\n      # scale_fill_hfv() +\n      labs(title = \"Virginia population\",\n           caption = \"**Source:** U.S. Census Bureau, Population Estimates Program and Decennial Census.\") +\n      scale_y_continuous(labels = number_format(big.mark = \",\"))\n    \n    \n    girafe(ggobj = gg, \n           width_svg = 7, \n           height_svg = 4,\n           options = list(\n             opts_tooltip(css = \"background-color:white;color:black;font-family:Verdana;padding:5pt;\"),\n             opts_sizing(rescale = FALSE),\n             opts_toolbar(pngname = \"state_pop\"))) \n  })\n}\n\n# The user interface (ui) is the front-facing side of the visualization. It includes \n# the input options, the output, and any other stylization for the visualization.\n# \n  ui <- fluidPage(\n    tags$head(\n    tags$link(rel = \"stylesheet\", href = \"https://fonts.googleapis.com/css?family=FontName\", type = \"text/css\"),\n    tags$style(HTML(\"\n\n      .selectize-input {\n        font-size: 10pt;\n      }\n      \n      .selectize-dropdown {\n        font-size: 10pt;\n      } \n      \n      .centered-image-container {\n          display: flex;\n          justify-content: right;\n          align-items: right;\n      }\n\n    \"))),\n    page_sidebar(mainPanel(\n      tabsetPanel(type = \"tabs\", id = \"tabselected\", selected = 1,\n        tabPanel(\"Statewide\", girafeOutput(\"state_plot\"), value =1),\n        tabPanel(\"CBSA\", girafeOutput(\"cbsa_plot\"), value =2),\n        tabPanel(\"Locality\", girafeOutput(\"local_plot\"), value =3)\n      )\n    ),\n    sidebar = sidebar(\n      position = \"right\",\n      conditionalPanel(condition = \"input.tabselected==2\",\n                       selectInput(\n                         inputId = \"sel_cbsa\",\n                         label = \"Select a CBSA\",\n                         choices = cbsa_list\n                       ),\n                       style = \"font-family: Open Sans;\"\n      ),\n      conditionalPanel(condition = \"input.tabselected==3\",\n        selectInput(\n          inputId = \"sel_locality\",\n          label = \"Select a locality\",\n          choices = locality_list\n        ),\n        style = \"font-family: Open Sans;\"\n      )\n    ),\n    hr(),\n    div(class = \"centered-image-container\",\n    img(src = \"hfv_logo.png\", width =\"150px\"))\n  ))\n\n\n# Run the application \nshinyApp(ui = ui, server = server)"
  },
  {
    "objectID": "population.html#components-of-population-change",
    "href": "population.html#components-of-population-change",
    "title": "1  Population",
    "section": "1.2 Components of Population Change",
    "text": "1.2 Components of Population Change\nThis dashboard breaks down annual population changes by three different components:\n\nNatural increases (births minus deaths),\nDomestic migration (net moves from in/out of state), and\nInternational migration (net moves from in/out of the country).\n\n\n\n\n\n1.2.1 Additional resources\nU.S. Census Bureau\nVirginia adds more than 600,000 people since 2010\nUVA Weldon Cooper Center\nState population growth slows, with most new residents in Northern Virginia\nComparing 2020 Virginia population projections to the Census count"
  },
  {
    "objectID": "population.html#data-sources",
    "href": "population.html#data-sources",
    "title": "1  Population",
    "section": "1.3 Data sources",
    "text": "1.3 Data sources\nCensus Population Estimates Program (PEP)\nAnnual estimates of total population released by the U.S. Census Bureau. Available at locality level from 2010 to 2019. Estimates by age, race, and ethnicity also available, along with components of population change.\n2020 Decennial Census\nInitial data from the 2020 Decennial Census is available in the PL 94-171 Redistricting summary file. As of February 2022, we use this data to append 2020 population counts onto the PEP time series data through 2019. Complete 2010 to 2020 Intercensal Estimates will be published in late 2022."
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "SOURCEBOOK",
    "section": "",
    "text": "About\nSOURCEBOOK is HousingForward Virginia’s free online resource for data on housing, demographic, and socioeconomic trends across the Commonwealth."
  },
  {
    "objectID": "population.html",
    "href": "population.html",
    "title": "1  shinylivedemo",
    "section": "",
    "text": "2 Population\nThe dashboards on this page include data on total population counts and components of population change. These trends help reveal how much, and for what reasons, population levels may be increasing or decreasing over time."
  }
]